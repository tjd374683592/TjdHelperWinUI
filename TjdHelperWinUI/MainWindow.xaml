<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="TjdHelperWinUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:TjdHelperWinUI"
    xmlns:local1="using:TjdHelperWinUI.Models"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:TjdHelperWinUI.ViewModels"
    Title="TjdHelperWinUI"
    Closed="Window_Closed"
    mc:Ignorable="d">

    <!--<Window.SystemBackdrop>
        <DesktopAcrylicBackdrop/>
    </Window.SystemBackdrop>-->

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  é¡¶éƒ¨ TitleBar  -->
        <Grid x:Name="AppTitleBar" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!--  å·¦ä¾§  -->
            <StackPanel
                Grid.Column="0"
                Margin="10,0,0,0"
                VerticalAlignment="Center"
                Orientation="Horizontal"
                Spacing="8">
                <TextBlock VerticalAlignment="Center" Text="ðŸ¿ TjdHelperWinUI" />
            </StackPanel>

            <!--  å³ä¾§  -->
            <PersonPicture
                x:Name="PersonPictureCtrl"
                Grid.Column="2"
                Width="20"
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                DisplayName="Jerry Tang"
                Foreground="{ThemeResource SystemAccentColor}"
                PointerPressed="PersonPictureCtrl_PointerPressed" />
        </Grid>

        <NavigationView
            x:Name="MainNavigation"
            Grid.Row="1"
            BackRequested="MainNavigation_BackRequested"
            IsBackEnabled="{x:Bind MainFrame.CanGoBack, Mode=OneWay}"
            ItemInvoked="MainNavigation_ItemInvoked"
            Loaded="MainNavigation_Loaded">

            <NavigationView.AutoSuggestBox>
                <AutoSuggestBox
                    x:Name="controlsSearchBox"
                    MinWidth="200"
                    VerticalAlignment="Center"
                    x:FieldModifier="public"
                    ItemsSource="{Binding SearchItemsResult, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    KeyboardAcceleratorPlacementMode="Hidden"
                    PlaceholderText="Search"
                    QueryIcon="Find"
                    SuggestionChosen="controlsSearchBox_SuggestionChosen"
                    Text="{Binding StrSearchInput, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    TextMemberPath="Name">
                    <AutoSuggestBox.ItemTemplate>
                        <DataTemplate x:DataType="local1:PageInfo">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{x:Bind Name}" />
                            </StackPanel>
                        </DataTemplate>
                    </AutoSuggestBox.ItemTemplate>
                    <AutoSuggestBox.KeyboardAccelerators>
                        <KeyboardAccelerator
                            Key="F"
                            Invoked="CtrlF_Invoked"
                            Modifiers="Control" />
                    </AutoSuggestBox.KeyboardAccelerators>
                </AutoSuggestBox>
            </NavigationView.AutoSuggestBox>

            <!--  å®šä¹‰èœå•é¡¹  -->
            <NavigationView.MenuItems>
                <NavigationViewItem
                    Content="Home"
                    Icon="Home"
                    Tag="HomePage" />
                <NavigationViewItem Content="Tools" Icon="Repair">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem
                            Content="Encryption"
                            Icon="Permissions"
                            Tag="EncryptHelperPage" />
                        <NavigationViewItem
                            Content="Encoding Converter"
                            Icon="Font"
                            Tag="EnDecodePage" />
                        <NavigationViewItem
                            Content="Time Converter"
                            Icon="Calendar"
                            Tag="TimeHelperPage" />
                        <NavigationViewItem
                            Content="File"
                            Icon="Folder"
                            Tag="FileHelperPage" />
                        <NavigationViewItem
                            Content="QR Code"
                            Icon="Camera"
                            Tag="QRCodePage" />
                        <NavigationViewItem
                            Content="Media Converter"
                            Icon="MusicInfo"
                            Tag="MediaConverterPage" />
                        <NavigationViewItem Content="Postman" Tag="PostmanPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE774;" />
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <NavigationViewItem Content="Windows">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE977;" />
                    </NavigationViewItem.Icon>
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem
                            Content="Library"
                            Icon="OutlineStar"
                            Tag="DebugNotePage" />
                        <NavigationViewItem
                            Content="Win Error Code"
                            Icon="Zoom"
                            Tag="WinErrorCodePage" />
                        <NavigationViewItem Content="Counter" Tag="SystemCounterPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xEC48;" />
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem
                            Content="Address Calc"
                            Icon="Calculator"
                            Tag="AddressHelperPage" />
                        <NavigationViewItem Content="Control/Services" Tag="CplMscSearchPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xE950;" />
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Network" Tag="NetworkPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xEC27;" />
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                        <NavigationViewItem Content="Cim" Tag="CimPage">
                            <NavigationViewItem.Icon>
                                <FontIcon Glyph="&#xEC27;" />
                            </NavigationViewItem.Icon>
                        </NavigationViewItem>
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>
                <NavigationViewItem Content="Preview" Icon="PreviewLink">
                    <NavigationViewItem.MenuItems>
                        <NavigationViewItem
                            Content="Markdown"
                            Icon="FontIncrease"
                            Tag="MarkdownPage" />
                        <NavigationViewItem
                            Content="Html"
                            Icon="World"
                            Tag="HtmlPage" />
                    </NavigationViewItem.MenuItems>
                </NavigationViewItem>

                <NavigationViewItem
                    Content="Json Format"
                    Icon="Edit"
                    Tag="JsonFormatPage" />

                <NavigationViewItem
                    Content="Rich Edit"
                    Icon="Keyboard"
                    Tag="RichEditPage" />

                <NavigationViewItem
                    Content="Everything"
                    Icon="Zoom"
                    Tag="EverythingPage" />

                <NavigationViewItem Content="DeepSeek" Tag="DeepSeekPage">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE99A;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>

            <!--  å†…å®¹åŒºåŸŸ  -->
            <Frame x:Name="MainFrame" />

        </NavigationView>

        <TeachingTip
            x:Name="TestButton1TeachingTip"
            Title="TjdHelperWinUI Tool"
            Subtitle="Developed by Jerry Tang."
            Target="{x:Bind PersonPictureCtrl}">
            <TeachingTip.IconSource>
                <SymbolIconSource Symbol="Contact" />
            </TeachingTip.IconSource>
        </TeachingTip>
    </Grid>
</Window>